{"ast":null,"code":"var daccord = require('daccord');\n\nvar knowledge = require('./knowledge');\n\nvar Note = require('./note');\n\nvar Interval = require('./interval');\n\nfunction Chord(root, name) {\n  if (!(this instanceof Chord)) return new Chord(root, name);\n  name = name || '';\n  this.name = root.name().toUpperCase() + root.accidental() + name;\n  this.symbol = name;\n  this.root = root;\n  this.intervals = [];\n  this._voicing = [];\n  var bass = name.split('/');\n\n  if (bass.length === 2 && bass[1].trim() !== '9') {\n    name = bass[0];\n    bass = bass[1].trim();\n  } else {\n    bass = null;\n  }\n\n  this.intervals = daccord(name).map(Interval.toCoord);\n  this._voicing = this.intervals.slice();\n\n  if (bass) {\n    var intervals = this.intervals,\n        bassInterval,\n        note; // Make sure the bass is atop of the root note\n\n    note = Note.fromString(bass + (root.octave() + 1)); // crude\n\n    bassInterval = Interval.between(root, note);\n    bass = bassInterval.simple();\n    bassInterval = bassInterval.invert().direction('down');\n    this._voicing = [bassInterval];\n\n    for (var i = 0, length = intervals.length; i < length; i++) {\n      if (!intervals[i].simple().equal(bass)) this._voicing.push(intervals[i]);\n    }\n  }\n}\n\nChord.prototype = {\n  notes: function notes() {\n    var root = this.root;\n    return this.voicing().map(function (interval) {\n      return root.interval(interval);\n    });\n  },\n  simple: function simple() {\n    return this.notes().map(function (n) {\n      return n.toString(true);\n    });\n  },\n  bass: function bass() {\n    return this.root.interval(this._voicing[0]);\n  },\n  voicing: function voicing(_voicing) {\n    // Get the voicing\n    if (!_voicing) {\n      return this._voicing;\n    } // Set the voicing\n\n\n    this._voicing = [];\n\n    for (var i = 0, length = _voicing.length; i < length; i++) {\n      this._voicing[i] = Interval.toCoord(_voicing[i]);\n    }\n\n    return this;\n  },\n  resetVoicing: function resetVoicing() {\n    this._voicing = this.intervals;\n  },\n  dominant: function dominant(additional) {\n    additional = additional || '';\n    return new Chord(this.root.interval('P5'), additional);\n  },\n  subdominant: function subdominant(additional) {\n    additional = additional || '';\n    return new Chord(this.root.interval('P4'), additional);\n  },\n  parallel: function parallel(additional) {\n    additional = additional || '';\n    var quality = this.quality();\n\n    if (this.chordType() !== 'triad' || quality === 'diminished' || quality === 'augmented') {\n      throw new Error('Only major/minor triads have parallel chords');\n    }\n\n    if (quality === 'major') {\n      return new Chord(this.root.interval('m3', 'down'), 'm');\n    } else {\n      return new Chord(this.root.interval('m3', 'up'));\n    }\n  },\n  quality: function quality() {\n    var third,\n        fifth,\n        seventh,\n        intervals = this.intervals;\n\n    for (var i = 0, length = intervals.length; i < length; i++) {\n      if (intervals[i].number() === 3) {\n        third = intervals[i];\n      } else if (intervals[i].number() === 5) {\n        fifth = intervals[i];\n      } else if (intervals[i].number() === 7) {\n        seventh = intervals[i];\n      }\n    }\n\n    if (!third) {\n      return;\n    }\n\n    third = third.direction() === 'down' ? third.invert() : third;\n    third = third.simple().toString();\n\n    if (fifth) {\n      fifth = fifth.direction === 'down' ? fifth.invert() : fifth;\n      fifth = fifth.simple().toString();\n    }\n\n    if (seventh) {\n      seventh = seventh.direction === 'down' ? seventh.invert() : seventh;\n      seventh = seventh.simple().toString();\n    }\n\n    if (third === 'M3') {\n      if (fifth === 'A5') {\n        return 'augmented';\n      } else if (fifth === 'P5') {\n        return seventh === 'm7' ? 'dominant' : 'major';\n      }\n\n      return 'major';\n    } else if (third === 'm3') {\n      if (fifth === 'P5') {\n        return 'minor';\n      } else if (fifth === 'd5') {\n        return seventh === 'm7' ? 'half-diminished' : 'diminished';\n      }\n\n      return 'minor';\n    }\n  },\n  chordType: function chordType() {\n    // In need of better name\n    var length = this.intervals.length,\n        interval,\n        has,\n        invert,\n        i,\n        name;\n\n    if (length === 2) {\n      return 'dyad';\n    } else if (length === 3) {\n      has = {\n        first: false,\n        third: false,\n        fifth: false\n      };\n\n      for (i = 0; i < length; i++) {\n        interval = this.intervals[i];\n        invert = interval.invert();\n\n        if (interval.base() in has) {\n          has[interval.base()] = true;\n        } else if (invert.base() in has) {\n          has[invert.base()] = true;\n        }\n      }\n\n      name = has.first && has.third && has.fifth ? 'triad' : 'trichord';\n    } else if (length === 4) {\n      has = {\n        first: false,\n        third: false,\n        fifth: false,\n        seventh: false\n      };\n\n      for (i = 0; i < length; i++) {\n        interval = this.intervals[i];\n        invert = interval.invert();\n\n        if (interval.base() in has) {\n          has[interval.base()] = true;\n        } else if (invert.base() in has) {\n          has[invert.base()] = true;\n        }\n      }\n\n      if (has.first && has.third && has.fifth && has.seventh) {\n        name = 'tetrad';\n      }\n    }\n\n    return name || 'unknown';\n  },\n  get: function get(interval) {\n    if (typeof interval === 'string' && interval in knowledge.stepNumber) {\n      var intervals = this.intervals,\n          i,\n          length;\n      interval = knowledge.stepNumber[interval];\n\n      for (i = 0, length = intervals.length; i < length; i++) {\n        if (intervals[i].number() === interval) {\n          return this.root.interval(intervals[i]);\n        }\n      }\n\n      return null;\n    } else {\n      throw new Error('Invalid interval name');\n    }\n  },\n  interval: function interval(_interval) {\n    return new Chord(this.root.interval(_interval), this.symbol);\n  },\n  transpose: function transpose(interval) {\n    this.root.transpose(interval);\n    this.name = this.root.name().toUpperCase() + this.root.accidental() + this.symbol;\n    return this;\n  },\n  toString: function toString() {\n    return this.name;\n  }\n};\nmodule.exports = Chord;","map":{"version":3,"names":["daccord","require","knowledge","Note","Interval","Chord","root","name","toUpperCase","accidental","symbol","intervals","_voicing","bass","split","length","trim","map","toCoord","slice","bassInterval","note","fromString","octave","between","simple","invert","direction","i","equal","push","prototype","notes","voicing","interval","n","toString","resetVoicing","dominant","additional","subdominant","parallel","quality","chordType","Error","third","fifth","seventh","number","has","first","base","get","stepNumber","transpose","module","exports"],"sources":["/home/reyden-martin/Documents/Tech2/HUB/Sony CSL/SONY-CSL-PROJECT/node_modules/react-piano-roll/node_modules/teoria/lib/chord.js"],"sourcesContent":["var daccord = require('daccord');\nvar knowledge = require('./knowledge');\nvar Note = require('./note');\nvar Interval = require('./interval');\n\nfunction Chord(root, name) {\n  if (!(this instanceof Chord)) return new Chord(root, name);\n  name = name || '';\n  this.name = root.name().toUpperCase() + root.accidental() + name;\n  this.symbol = name;\n  this.root = root;\n  this.intervals = [];\n  this._voicing = [];\n\n  var bass = name.split('/');\n  if (bass.length === 2 && bass[1].trim() !== '9') {\n    name = bass[0];\n    bass = bass[1].trim();\n  } else {\n    bass = null;\n  }\n\n  this.intervals = daccord(name).map(Interval.toCoord)\n  this._voicing = this.intervals.slice();\n\n  if (bass) {\n    var intervals = this.intervals, bassInterval, note;\n    // Make sure the bass is atop of the root note\n    note = Note.fromString(bass + (root.octave() + 1)); // crude\n\n    bassInterval = Interval.between(root, note);\n    bass = bassInterval.simple();\n    bassInterval = bassInterval.invert().direction('down');\n\n    this._voicing = [bassInterval];\n    for (var i = 0, length = intervals.length;  i < length; i++) {\n      if (!intervals[i].simple().equal(bass))\n        this._voicing.push(intervals[i]);\n    }\n  }\n}\n\nChord.prototype = {\n  notes: function() {\n    var root = this.root;\n    return this.voicing().map(function(interval) {\n      return root.interval(interval);\n    });\n  },\n\n  simple: function() {\n    return this.notes().map(function(n) { return n.toString(true); });\n  },\n\n  bass: function() {\n    return this.root.interval(this._voicing[0]);\n  },\n\n  voicing: function(voicing) {\n    // Get the voicing\n    if (!voicing) {\n      return this._voicing;\n    }\n\n    // Set the voicing\n    this._voicing = [];\n    for (var i = 0, length = voicing.length; i < length; i++) {\n      this._voicing[i] = Interval.toCoord(voicing[i]);\n    }\n\n    return this;\n  },\n\n  resetVoicing: function() {\n    this._voicing = this.intervals;\n  },\n\n  dominant: function(additional) {\n    additional = additional || '';\n    return new Chord(this.root.interval('P5'), additional);\n  },\n\n  subdominant: function(additional) {\n    additional = additional || '';\n    return new Chord(this.root.interval('P4'), additional);\n  },\n\n  parallel: function(additional) {\n    additional = additional || '';\n    var quality = this.quality();\n\n    if (this.chordType() !== 'triad' || quality === 'diminished' ||\n        quality === 'augmented') {\n      throw new Error('Only major/minor triads have parallel chords');\n    }\n\n    if (quality === 'major') {\n      return new Chord(this.root.interval('m3', 'down'), 'm');\n    } else {\n      return new Chord(this.root.interval('m3', 'up'));\n    }\n  },\n\n  quality: function() {\n    var third, fifth, seventh, intervals = this.intervals;\n\n    for (var i = 0, length = intervals.length; i < length; i++) {\n      if (intervals[i].number() === 3) {\n        third = intervals[i];\n      } else if (intervals[i].number() === 5) {\n        fifth = intervals[i];\n      } else if (intervals[i].number() === 7) {\n        seventh = intervals[i];\n      }\n    }\n\n    if (!third) {\n      return;\n    }\n\n    third = (third.direction() === 'down') ? third.invert() : third;\n    third = third.simple().toString();\n\n    if (fifth) {\n      fifth = (fifth.direction === 'down') ? fifth.invert() : fifth;\n      fifth = fifth.simple().toString();\n    }\n\n    if (seventh) {\n      seventh = (seventh.direction === 'down') ? seventh.invert() : seventh;\n      seventh = seventh.simple().toString();\n    }\n\n    if (third === 'M3') {\n      if (fifth === 'A5') {\n        return 'augmented';\n      } else if (fifth === 'P5') {\n        return (seventh === 'm7') ? 'dominant' : 'major';\n      }\n\n      return 'major';\n    } else if (third === 'm3') {\n      if (fifth === 'P5') {\n        return 'minor';\n      } else if (fifth === 'd5') {\n        return (seventh === 'm7') ? 'half-diminished' : 'diminished';\n      }\n\n      return 'minor';\n    }\n  },\n\n  chordType: function() { // In need of better name\n    var length = this.intervals.length, interval, has, invert, i, name;\n\n    if (length === 2) {\n      return 'dyad';\n    } else if (length === 3) {\n      has = {first: false, third: false, fifth: false};\n      for (i = 0; i < length; i++) {\n        interval = this.intervals[i];\n        invert = interval.invert();\n        if (interval.base() in has) {\n          has[interval.base()] = true;\n        } else if (invert.base() in has) {\n          has[invert.base()] = true;\n        }\n      }\n\n      name = (has.first && has.third && has.fifth) ? 'triad' : 'trichord';\n    } else if (length === 4) {\n      has = {first: false, third: false, fifth: false, seventh: false};\n      for (i = 0; i < length; i++) {\n        interval = this.intervals[i];\n        invert = interval.invert();\n        if (interval.base() in has) {\n          has[interval.base()] = true;\n        } else if (invert.base() in has) {\n          has[invert.base()] = true;\n        }\n      }\n\n      if (has.first && has.third && has.fifth && has.seventh) {\n        name = 'tetrad';\n      }\n    }\n\n    return name || 'unknown';\n  },\n\n  get: function(interval) {\n    if (typeof interval === 'string' && interval in knowledge.stepNumber) {\n      var intervals = this.intervals, i, length;\n\n      interval = knowledge.stepNumber[interval];\n      for (i = 0, length = intervals.length; i < length; i++) {\n        if (intervals[i].number() === interval) {\n          return this.root.interval(intervals[i]);\n        }\n      }\n\n      return null;\n    } else {\n      throw new Error('Invalid interval name');\n    }\n  },\n\n  interval: function(interval) {\n    return new Chord(this.root.interval(interval), this.symbol);\n  },\n\n  transpose: function(interval) {\n    this.root.transpose(interval);\n    this.name = this.root.name().toUpperCase() +\n                this.root.accidental() + this.symbol;\n\n    return this;\n  },\n\n  toString: function() {\n    return this.name;\n  }\n};\n\nmodule.exports = Chord;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}